# ‚úÖ Deployment Checklist - Week 3

–ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –¥–µ–ø–ª–æ—è Telegram –±–æ—Ç–∞ –Ω–∞ Railway.com

---

## üìã Pre-Deployment

### –ö–æ–¥ –≥–æ—Ç–æ–≤
- [x] Bot —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞
- [x] –í—Å–µ handlers —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [x] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru/uk) –≥–æ—Ç–æ–≤–∞
- [x] API client –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [x] Backend endpoints –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] Dockerfile –æ–±–Ω–æ–≤–ª–µ–Ω

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] `bot/config.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [x] `TELEGRAM_BOT_TOKEN` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] `BACKEND_API_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] Dockerfile –∑–∞–ø—É—Å–∫–∞–µ—Ç backend + bot

---

## üöÄ Railway Deployment

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–∞ Railway —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```env
# Telegram
TELEGRAM_BOT_TOKEN=7471812936:AAFoji4k74oAo347ahNaa1K1WAPtiSQ_ox8

# Backend
BACKEND_API_URL=http://localhost:8000

# OpenAI
OPENAI_API_KEY=sk-...

# Database (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Railway PostgreSQL)
DATABASE_URL=postgresql://...

# Config
ENVIRONMENT=production
LOG_LEVEL=INFO
PORT=8000
```

### 2. –î–µ–ø–ª–æ–π –∫–æ–º–∞–Ω–¥–∞

```bash
railway up
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Railway CLI:

```bash
railway link
railway up
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
railway logs
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ Running database migrations...
‚úÖ Starting backend server...
‚úÖ Starting bot...
‚úÖ bot_started mode=polling
```

---

## üß™ Testing –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### Smoke Tests

1. **Backend Health Check**
   ```bash
   curl https://your-railway-url.railway.app/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: `{"status": "healthy"}`

2. **Bot /start**
   - –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å `/start`
   - –î–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å—Å—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥

3. **–í—ã–±–æ—Ä —è–∑—ã–∫–∞**
   - –í—ã–±–µ—Ä–∏ —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —è–∑—ã–∫–µ

4. **–í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è**
   - –í—ã–±–µ—Ä–∏ –ª—é–±–æ–π —É—Ä–æ–≤–µ–Ω—å
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –≤ –ë–î

5. **–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
   - –ó–∞–ø–∏—à–∏ –≥–æ–ª–æ—Å–æ–≤–æ–µ –Ω–∞ —á–µ—à—Å–∫–æ–º
   - –î–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –æ—Ç–≤–µ—Ç –æ—Ç –•–æ–Ω–∑–∏–∫–∞
   - –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

6. **–ö–æ–º–∞–Ω–¥—ã**
   - `/help` - –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–ø—Ä–∞–≤–∫–∞
   - `/stats` - –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - `/level` - –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
   - `/reset` - –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Railway Dashboard

–ü—Ä–æ–≤–µ—Ä—å –º–µ—Ç—Ä–∏–∫–∏:
- CPU Usage < 50%
- Memory Usage < 80%
- Response Time < 3s
- No errors –≤ –ª–æ–≥–∞—Ö

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
  "event": "voice_processed",
  "telegram_id": 123456,
  "score": 85,
  "streak": 3,
  "timestamp": "2025-12-06T..."
}
```

---

## ‚ö†Ô∏è Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Railway
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ bot process –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å TELEGRAM_BOT_TOKEN
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ webhook/polling

### Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

1. –ü—Ä–æ–≤–µ—Ä—å health endpoint
2. –ü—Ä–æ–≤–µ—Ä—å DATABASE_URL
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ—à–ª–∏
4. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend

### –ì–æ–ª–æ—Å–æ–≤—ã–µ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å OPENAI_API_KEY
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ backend
3. –ü—Ä–æ–≤–µ—Ä—å timeout (30 —Å–µ–∫)
4. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞

---

## üìä Post-Deployment Metrics

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π:

- ‚úÖ Uptime > 99%
- ‚úÖ Response time < 5s (95th percentile)
- ‚úÖ Error rate < 2%
- ‚úÖ Successful registrations
- ‚úÖ Voice messages processed
- ‚úÖ OpenAI API cost

---

## üéØ Week 4 –ó–∞–¥–∞—á–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ Week 4:

- [ ] End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- [ ] –ë–∞–≥—Ñ–∏–∫—Å–∏–Ω–≥
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞

---

## üéâ Success Criteria

–ë–æ—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–º –µ—Å–ª–∏:

- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è < 5 —Å–µ–∫
- ‚úÖ –û–±–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –õ–æ–≥–∏ —á–∏—Ç–∞–µ–º—ã–µ
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –•–æ–Ω–∑–∏–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é! üöÄ**

**Na zdrav√≠! üç∫**


