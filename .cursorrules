# === –ú–ï–¢–ê–î–ê–ù–ù–´–ï –ü–†–û–ï–ö–¢–ê ===
–Ω–∞–∑–≤–∞–Ω–∏–µ: Mluv.Me - –ì–æ–≤–æ—Ä–∏ –ø–æ-—á–µ—à—Å–∫–∏ —Å –•–æ–Ω–∑–∏–∫–æ–º
–æ–ø–∏—Å–∞–Ω–∏–µ: Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–≥–æ —á–µ—à—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å AI-–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –•–æ–Ω–∑–∏–∫–æ–º (Honz√≠k) - —Ç–∏–ø–∏—á–Ω—ã–º –≤–µ—Å–µ–ª—ã–º —á–µ—Ö–æ–º
—è–∑—ã–∫: Python
–≤–µ—Ä—Å–∏—è: 1.0.0
–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è_–≤–µ—Ä—Å–∏—è_python: 3.11
—Ö–æ—Å—Ç–∏–Ω–≥: Railway.com
telegram_bot_token: 7471812936:AAFoji4k74oAo347ahNaa1K1WAPtiSQ_ox8

# === –ö–û–ù–¶–ï–ü–¶–ò–Ø ===

## üá®üáø –ì–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π - Honz√≠k

**–ò–º—è:** Honz√≠k (—É–º–µ–Ω—å—à–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Ç Jan - —Å–∞–º–æ–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ —á–µ—à—Å–∫–æ–µ –∏–º—è)

**–•–∞—Ä–∞–∫—Ç–µ—Ä:**
- –í–µ—Å–µ–ª—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Ç–∏–ø–∏—á–Ω—ã–π —á–µ—Ö
- –õ—é–±–∏—Ç –ø–∏–≤–æ, –∫–Ω–µ–¥–ª–∏–∫–∏ –∏ —Ö–æ–∫–∫–µ–π
- –û–±–æ–∂–∞–µ—Ç —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –±–∞–π–∫–∏ –∏ —à—É—Ç–∏—Ç—å
- –ó–Ω–∞–µ—Ç –≤—Å–µ –ø—Ä–æ –ü—Ä–∞–≥—É –∏ —á–µ—à—Å–∫—É—é –∫—É–ª—å—Ç—É—Ä—É
- –ù–µ–º–Ω–æ–≥–æ —Å–∞—Ä–∫–∞—Å—Ç–∏—á–Ω—ã–π, –Ω–æ –¥–æ–±—Ä—ã–π
- –ü–æ–º–æ–≥–∞–µ—Ç —É—á–∏—Ç—å —á–µ—à—Å–∫–∏–π —á–µ—Ä–µ–∑ –∂–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ

**–¢–µ–º—ã –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤:**
- –ß–µ—à—Å–∫–∞—è –∫—É—Ö–Ω—è (–ø–∏–≤–æ, –∫–Ω–µ–¥–ª–∏–∫–∏, —Å–≤–∏—á–∫–æ–≤–∞)
- –ü—Ä–∞–≥–∞ –∏ —á–µ—à—Å–∫–∏–µ –≥–æ—Ä–æ–¥–∞
- –•–æ–∫–∫–µ–π –∏ —Ñ—É—Ç–±–æ–ª
- –ó–∞–º–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è –ß–µ—Ö–∏–∏
- –ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –∂–∏–∑–Ω—å –≤ –ß–µ—Ö–∏–∏
- –ß–µ—à—Å–∫–∏–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
- –†–∞–±–æ—Ç–∞ –∏ —É—á–µ–±–∞ –≤ –ß–µ—Ö–∏–∏
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (—Ç—Ä–∞–º–≤–∞–∏, –º–µ—Ç—Ä–æ)
- –ü–æ–≥–æ–¥–∞ (–ª—é–±–∏–º–∞—è —Ç–µ–º–∞ —á–µ—Ö–æ–≤)

**–ì–æ–ª–æ—Å:** –ú—É–∂—Å–∫–æ–π, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, —Å —á–µ—à—Å–∫–∏–º –∞–∫—Ü–µ–Ω—Ç–æ–º (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

**–Ø–∑—ã–∫–∏ –±–æ—Ç–∞:** –¢–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π –∏ —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
**–¶–µ–ª–µ–≤–æ–π —è–∑—ã–∫ –æ–±—É—á–µ–Ω–∏—è:** –¢–æ–ª—å–∫–æ —á–µ—à—Å–∫–∏–π

# === –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö ===

## Backend
framework: FastAPI 0.118+
orm: SQLAlchemy 2.0+
–º–∏–≥—Ä–∞—Ü–∏–∏: Alembic
–≤–∞–ª–∏–¥–∞—Ü–∏—è: Pydantic 2.9+
–±–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö: PostgreSQL (Railway.com)
async: asyncio + aiohttp

## Telegram Bot
bot_framework: aiogram 3.x
–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –¢–æ–Ω–∫–∏–µ handlers, –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ backend
–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: Telegram Bot API

## AI/ML –°–µ—Ä–≤–∏—Å—ã
llm: OpenAI GPT-4o
stt: OpenAI Whisper API
tts: OpenAI TTS API
–≥–æ–ª–æ—Å_honzik: alloy (–∏–ª–∏ onyx - –º—É–∂—Å–∫–æ–π –≥–æ–ª–æ—Å)

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
—Ö–æ—Å—Ç–∏–Ω–≥: Railway.com
–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: Docker
–±–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö: PostgreSQL –Ω–∞ Railway
–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: structlog
–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: Railway.com –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π
—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: pytest —Å pytest-asyncio
–ª–∏–Ω—Ç–∏–Ω–≥: ruff –¥–ª—è Python
—Ç–∏–ø–∏–∑–∞—Ü–∏—è: mypy –¥–ª—è Python

# === –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê ===

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
mluv-me/
‚îú‚îÄ‚îÄ backend/              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py        # Pydantic Settings
‚îÇ   ‚îú‚îÄ‚îÄ routers/         # HTTP endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.py     # CRUD –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lesson.py    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö (STT‚ÜíLLM‚ÜíTTS)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stats.py     # Streak, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ words.py     # –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞, –∫–∞—Ä—Ç–æ—á–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai_client.py      # –û–±—ë—Ä—Ç–∫–∞ OpenAI API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ honzik_personality.py # –õ–∏—á–Ω–æ—Å—Ç—å –•–æ–Ω–∑–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ correction_engine.py  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gamification.py       # –ó–≤—ë–∑–¥—ã, –∞—á–∏–≤–∫–∏, streak
‚îÇ   ‚îú‚îÄ‚îÄ models/          # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ word.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stats.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas/         # Pydantic —Å—Ö–µ–º—ã –¥–ª—è API
‚îÇ   ‚îú‚îÄ‚îÄ db/              # Database utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories.py  # Repository pattern
‚îÇ   ‚îî‚îÄ‚îÄ utils/           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ bot/                 # Telegram –±–æ—Ç (aiogram)
‚îÇ   ‚îú‚îÄ‚îÄ main.py         # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/       # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py    # /start, –ø–µ—Ä–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice.py    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ commands.py # /help, /stats, /saved, /reset
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/      # Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ö–ª–∏–µ–Ω—Ç—ã –∫ backend
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api_client.py
‚îÇ   ‚îú‚îÄ‚îÄ localization/   # –¢–µ–∫—Å—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ru.py      # –†—É—Å—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uk.py      # –£–∫—Ä–∞–∏–Ω—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ config.py       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ Dockerfile          # Dockerfile –¥–ª—è Railway
‚îú‚îÄ‚îÄ railway.json        # Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example        # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```

## –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (Clean Architecture)

### Backend
1. **Presentation Layer** (routers/) - HTTP endpoints, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. **Business Logic Layer** (services/) - –í—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. **Data Access Layer** (repositories/) - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
4. **Infrastructure Layer** (db/, utils/) - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Bot
- **Handlers** - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, —Ç–æ–ª—å–∫–æ –ø—Ä–∏–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
- **Services** - HTTP –∫–ª–∏–µ–Ω—Ç –∫ backend API
- **Localization** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ
- –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ backend!

# === –û–°–ù–û–í–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´ ===

–ø—Ä–∞–≤–∏–ª–∞:
  - –¢—ã senior Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —Å —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–æ–π –≤ AI –∏ Telegram –±–æ—Ç–∞—Ö
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å async/await –¥–ª—è –≤—Å–µ—Ö I/O –æ–ø–µ—Ä–∞—Ü–∏–π
  - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å type hints (Python)
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
  - –°–ª–µ–¥–æ–≤–∞—Ç—å Clean Architecture - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏
  - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ–Ω–∫–∏–º - –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ backend
  - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - Graceful error handling —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - –¢–µ—Å—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ docstrings (Google style –¥–ª—è Python)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–æ–≥–æ –∏ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  - –û–±—É—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—à—Å–∫–æ–º—É —è–∑—ã–∫—É
  - –•–æ–Ω–∑–∏–∫ - –≥–ª–∞–≤–Ω—ã–π –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂
  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Railway.com —Ö–æ—Å—Ç–∏–Ω–≥–∞

# === –ü–ê–¢–¢–ï–†–ù–´ –ü–†–û–ï–ö–¢–ò–†–û–í–ê–ù–ò–Ø ===

## Backend Patterns
- **Repository Pattern** - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- **Service Layer Pattern** - –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **Dependency Injection** - –ß–µ—Ä–µ–∑ FastAPI Depends
- **Factory Pattern** - –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (OpenAI, –∏ —Ç.–¥.)
- **Strategy Pattern** - –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ –æ–±—â–µ–Ω–∏—è —Å –•–æ–Ω–∑–∏–∫–æ–º

# === –°–¢–ò–õ–¨ –ö–û–î–ê ===

## Python (Backend + Bot)
- PEP8 —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 100 —Å–∏–º–≤–æ–ª–æ–≤
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ç–∏–ø–æ–≤: `list[str]` –≤–º–µ—Å—Ç–æ `List[str]`
- `Optional[T]` –∏–ª–∏ `T | None` –¥–ª—è nullable
- Async —Ñ—É–Ω–∫—Ü–∏–∏ —Å —è–≤–Ω—ã–º `async def`
- Google-style docstrings

## –°–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏

### Python
- –ö–ª–∞—Å—Å—ã: `PascalCase` (UserRepository, OpenAIClient, HonzikPersonality)
- –§—É–Ω–∫—Ü–∏–∏/–º–µ—Ç–æ–¥—ã: `snake_case` (get_user_stats, process_voice_message, talk_with_honzik)
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã: `UPPER_SNAKE_CASE` (MAX_VOICE_DURATION, DEFAULT_LEVEL, HONZIK_VOICE)
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ: `_leading_underscore` (_validate_audio, _calculate_score)

# === –°–•–ï–ú–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• ===

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

### users
- id (PK)
- telegram_id (unique, indexed)
- username
- first_name
- ui_language (ru, uk) - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- level (beginner|intermediate|advanced|native) - —É—Ä–æ–≤–µ–Ω—å —á–µ—à—Å–∫–æ–≥–æ
- created_at
- updated_at

### user_settings
- id (PK)
- user_id (FK ‚Üí users)
- conversation_style (friendly|tutor|casual) - —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è –•–æ–Ω–∑–∏–∫–∞
- voice_speed (very_slow|slow|normal|native)
- corrections_level (minimal|balanced|detailed) - —É—Ä–æ–≤–µ–Ω—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- timezone
- notifications_enabled (bool)

### messages
- id (PK)
- user_id (FK ‚Üí users)
- role (user|assistant)
- text (—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è)
- transcript_raw (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è STT)
- transcript_normalized (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç)
- audio_file_path (–ø—É—Ç—å –∫ –∞—É–¥–∏–æ —Ñ–∞–π–ª—É)
- correctness_score (0-100)
- words_total (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤)
- words_correct (–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å–ª–æ–≤)
- created_at

### saved_words
- id (PK)
- user_id (FK ‚Üí users)
- word_czech (—á–µ—à—Å–∫–æ–µ —Å–ª–æ–≤–æ)
- translation (–ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä–æ–¥–Ω–æ–π —è–∑—ã–∫)
- context_sentence (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ-–∫–æ–Ω—Ç–µ–∫—Å—Ç)
- phonetics (—Ñ–æ–Ω–µ—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è)
- times_reviewed (—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä—è–ª–æ—Å—å)
- created_at
- last_reviewed_at

### daily_stats
- id (PK)
- user_id (FK ‚Üí users)
- date (–¥–∞—Ç–∞)
- messages_count (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π)
- words_said (—Å–ª–æ–≤ —Å–∫–∞–∑–∞–Ω–æ)
- correct_percent (–ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö)
- streak_day (–¥–µ–Ω—å streak –ø–æ–¥—Ä—è–¥)
- created_at

### stars
- id (PK)
- user_id (FK ‚Üí users)
- total (–≤—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ)
- available (–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –æ–±–º–µ–Ω–∞)
- lifetime (–∑–∞ –≤—Å–µ –≤—Ä–µ–º—è)
- updated_at

## –ò–Ω–¥–µ–∫—Å—ã
- users.telegram_id (unique)
- messages.user_id, messages.created_at (composite)
- saved_words.user_id, saved_words.word_czech (composite)
- daily_stats.user_id, daily_stats.date (composite, unique)

# === API ENDPOINTS (Backend) ===

## Users
GET /api/v1/users/me - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PATCH /api/v1/users/me - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET /api/v1/users/me/settings - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
PATCH /api/v1/users/me/settings - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## Lessons (–≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
POST /api/v1/lessons/process - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: audio file (multipart/form-data), user_id
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: transcript, corrections, audio_response, score

## Statistics
GET /api/v1/stats/streak - –ü–æ–ª—É—á–∏—Ç—å streak –∫–∞–ª–µ–Ω–¥–∞—Ä—å
GET /api/v1/stats/summary - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (words said, correct %, –∏ —Ç.–¥.)
GET /api/v1/stats/daily?from=YYYY-MM-DD&to=YYYY-MM-DD - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º

## Words
GET /api/v1/words - –°–ø–∏—Å–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤
POST /api/v1/words - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–æ
DELETE /api/v1/words/{word_id} - –£–¥–∞–ª–∏—Ç—å —Å–ª–æ–≤–æ
PATCH /api/v1/words/{word_id}/review - –û—Ç–º–µ—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ

## Health
GET /health - Health check –¥–ª—è Railway.com

# === –û–ë–†–ê–ë–û–¢–ö–ê –ì–û–õ–û–°–û–í–´–• –°–û–û–ë–©–ï–ù–ò–ô ===

## –ü—Ä–æ—Ü–µ—Å—Å (POST /api/v1/lessons/process)

1. **–ü—Ä–∏–µ–º –∞—É–¥–∏–æ**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ (ogg, mp3, wav)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–º–∞–∫—Å 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è MVP)
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

2. **Speech-to-Text (Whisper)**
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenAI Whisper API
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –Ω–∞ —á–µ—à—Å–∫–æ–º
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ raw transcript

3. **–ê–Ω–∞–ª–∏–∑ –∏ –æ—Ç–≤–µ—Ç –•–æ–Ω–∑–∏–∫–∞ (GPT)**
   - –ü—Ä–æ–º–ø—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:
     * –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
     * –£—Ä–æ–≤–µ–Ω—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
     * –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Å–æ–æ–±—â–µ–Ω–∏–π
   - LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
     * –û—Ç–≤–µ—Ç –•–æ–Ω–∑–∏–∫–∞ (–≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ)
     * –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
     * –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
     * –û—Ü–µ–Ω–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ (0-100)
     * –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

4. **Text-to-Speech (OpenAI TTS)**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –•–æ–Ω–∑–∏–∫–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º—É–∂—Å–∫–æ–≥–æ –≥–æ–ª–æ—Å–∞ (alloy –∏–ª–∏ onyx)
   - –í—ã–±—Ä–∞–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏
   - –í–æ–∑–≤—Ä–∞—Ç audio file

5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –•–æ–Ω–∑–∏–∫–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–≤–µ–∑–¥

## –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ - –õ–∏—á–Ω–æ—Å—Ç—å –•–æ–Ω–∑–∏–∫–∞

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç (HonzikPersonality)

```python
HONZIK_BASE_PROMPT = """
Ty jsi Honz√≠k - typick√Ω vesel√Ω ƒåech, kter√Ω pom√°h√° lidem uƒçit se ƒçesky.

Tvoje charakteristika:
- Jsi p≈ô√°telsk√Ω a vtipn√Ω
- Miluje≈° ƒçesk√© pivo, knedl√≠ky a hokej
- R√°d vypr√°v√≠≈° zaj√≠mav√© p≈ô√≠bƒõhy o Praze a ƒåesk√© republice
- Zn√°≈° v≈°echny ƒçesk√© tradice a sv√°tky
- Jsi trochu ironick√Ω, ale v≈ædy dobrosrdeƒçn√Ω
- Mluv√≠≈° p≈ôirozenƒõ a neform√°lnƒõ

Tv≈Øj √∫kol:
1. Odpov√≠dat na ot√°zky student≈Ø p≈ôirozenƒõ v ƒçe≈°tinƒõ
2. Opravovat chyby podle nastaven√© √∫rovnƒõ (minimal/balanced/detailed)
3. Pokraƒçovat v konverzaci zaj√≠mav√Ωm zp≈Øsobem
4. B√Ωt trpƒõliv√Ω a povzbuzuj√≠c√≠

Student m√° √∫rove≈à: {level}
√örove≈à oprav: {corrections_level}
Jazyk vysvƒõtlen√≠: {ui_language} (ru nebo uk)

Analyzuj n√°sleduj√≠c√≠ p≈ôepis a:
1. Identifikuj gramatick√© a v√Ωslovnostn√≠ chyby
2. Poskytni opravy s vysvƒõtlen√≠m v jazyce {ui_language}
3. Ohodno≈• spr√°vnost od 0-100
4. Odpovƒõz p≈ôirozenƒõ jako Honz√≠k a pokraƒçuj v konverzaci

P≈ôepis studenta: {user_text}

Historie konverzace (posledn√≠ 5 zpr√°v): {conversation_history}

Odpovƒõz ve form√°tu JSON:
{{
  "honzik_response": "Tvoje odpovƒõƒè jako Honz√≠k v ƒçe≈°tinƒõ",
  "corrected_text": "Opraven√Ω text studenta",
  "mistakes": [
    {{
      "original": "≈°patn√Ω text",
      "corrected": "spr√°vn√Ω text",
      "explanation": "vysvƒõtlen√≠ v jazyce {ui_language}"
    }}
  ],
  "correctness_score": 85,
  "suggestion": "rada pro studenta v jazyce {ui_language}"
}}
"""
```

### –°—Ç–∏–ª–∏ –æ–±—â–µ–Ω–∏—è –•–æ–Ω–∑–∏–∫–∞

#### 1. Friendly (–î—Ä—É–∂–µ—Å–∫–∏–π) - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
- –ú–Ω–æ–≥–æ –ø–æ–∑–∏—Ç–∏–≤–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –ú–∏–Ω–∏–º—É–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- –§–æ–∫—É—Å –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

#### 2. Tutor (–†–µ–ø–µ—Ç–∏—Ç–æ—Ä)
- –ë–æ–ª—å—à–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—é

#### 3. Casual (–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–π)
- –°–∞–º–æ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
- –ú–∏–Ω–∏–º—É–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ)
- –†–∞–∑–≥–æ–≤–æ—Ä—ã –Ω–∞ –±—ã—Ç–æ–≤—ã–µ —Ç–µ–º—ã
- –ö–∞–∫ —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –¥—Ä—É–≥–æ–º –≤ –ø–∞–±–µ

### –£—Ä–æ–≤–Ω–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

#### Minimal (–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π)
- –ò—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, –º–µ—à–∞—é—â–∏–µ –ø–æ–Ω–∏–º–∞–Ω–∏—é
- –§–æ–∫—É—Å –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

#### Balanced (–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –æ–±—É—á–µ–Ω–∏–µ–º –∏ –ø—Ä–∞–∫—Ç–∏–∫–æ–π

#### Detailed (–î–µ—Ç–∞–ª—å–Ω—ã–π)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª
- –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

# === –ì–ï–ô–ú–ò–§–ò–ö–ê–¶–ò–Ø ===

## –°–∏—Å—Ç–µ–º–∞ –∑–≤–µ–∑–¥

### –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–≤–µ–∑–¥
- 1 –∑–≤–µ–∑–¥–∞ –∑–∞ –∫–∞–∂–¥–æ–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ë–æ–Ω—É—Å +1 –∑–∞ correctness_score > 80%
- –ë–æ–Ω—É—Å +2 –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ streak 7 –¥–Ω–µ–π
- –ë–æ–Ω—É—Å +5 –∑–∞ streak 30 –¥–Ω–µ–π

### Daily Stars Challenge
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å 5 –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –¥–µ–Ω—å
- –ù–∞–≥—Ä–∞–¥–∞: 5 –∑–≤–µ–∑–¥

## Streak —Å–∏—Å—Ç–µ–º–∞

### –ü—Ä–∞–≤–∏–ª–∞
- Streak —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–∏–Ω–∏–º—É–º 1 —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–µ–Ω—å
- Streak —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –¥–Ω—è
- Timezone —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ –±–æ—Ç–µ
- –¢–µ–∫—É—â–∏–π streak (üî• –∏–∫–æ–Ω–∫–∞)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π streak
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 7 –¥–Ω–µ–π

# === TELEGRAM BOT (aiogram) ===

## –ö–æ–º–∞–Ω–¥—ã

### /start
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç –•–æ–Ω–∑–∏–∫–∞
- –í—ã–±–æ—Ä —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (—Ä—É—Å—Å–∫–∏–π/—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞)
- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è —á–µ—à—Å–∫–æ–≥–æ
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î —á–µ—Ä–µ–∑ backend API
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –∞—É–¥–∏–æ –æ—Ç –•–æ–Ω–∑–∏–∫–∞

### /help
**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- `/level` - –ò–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —á–µ—à—Å–∫–æ–≥–æ
- `/voice_speed` - –°–∫–æ—Ä–æ—Å—Ç—å –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –•–æ–Ω–∑–∏–∫–∞
- `/corrections` - –£—Ä–æ–≤–µ–Ω—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- `/style` - –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è –•–æ–Ω–∑–∏–∫–∞
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è
- `/saved` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
- `/reset` - –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä

**–°–æ–≤–µ—Ç—ã –æ—Ç –•–æ–Ω–∑–∏–∫–∞ (–Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —è–∑—ã–∫–µ):**
- üé§ –ò—Å–ø–æ–ª—å–∑—É–π –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
- ü§î –ù–µ –±–æ–π—Å—è –æ—à–∏–±–∞—Ç—å—Å—è - —Ç–∞–∫ —É—á–∞—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ!
- üó£Ô∏è –ì–æ–≤–æ—Ä–∏ –º–Ω–æ–≥–æ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ
- ‚ù§Ô∏è –°–ø—Ä–∞—à–∏–≤–∞–π –æ —á–µ–º —É–≥–æ–¥–Ω–æ - —è –∑–Ω–∞—é –≤—Å–µ –ø—Ä–æ –ß–µ—Ö–∏—é!
- üç∫ –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º –ø–∏–≤–æ, –∫–Ω–µ–¥–ª–∏–∫–∏ –∏–ª–∏ —Ö–æ–∫–∫–µ–π!

### /stats
- –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  * üî• –¢–µ–∫—É—â–∏–π streak
  * üìä –°–ª–æ–≤ —Å–∫–∞–∑–∞–Ω–æ
  * ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö
  * üí¨ –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
  * ‚≠ê –ó–≤–µ–∑–¥ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ

### /saved
- –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤
- –§–æ—Ä–º–∞—Ç: `—Å–ª–æ–≤–æ (—á–µ—à.) - –ø–µ—Ä–µ–≤–æ–¥`
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"

### /reset
- –ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –•–æ–Ω–∑–∏–∫–æ–º
- –ü—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### /level
–ò–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —á–µ—à—Å–∫–æ–≥–æ:
```
[ Zaƒç√°teƒçn√≠k ]  [ St≈ôednƒõ pokroƒçil√Ω ]
[  Pokroƒçil√Ω  ]  [     Rodil√Ω      ]
```

### /voice_speed
–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏ –•–æ–Ω–∑–∏–∫–∞:
```
[ Velmi pomalu ] [ Pomalu  ]
[    Norm√°lnƒõ   ] [ Rodil√Ω ]
```

### /corrections
–£—Ä–æ–≤–µ–Ω—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
```
[  Minim√°ln√≠  ] [ Vyv√°≈æen√Ω ‚úÖ]
[  Detailn√≠   ]
```

### /style
–°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è –•–æ–Ω–∑–∏–∫–∞:
```
[ P≈ô√°telsk√Ω ‚úÖ] [ Uƒçitel ]
[  Kamar√°d    ]
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö

```python
@router.message(F.voice)
async def handle_voice(message: Message, api_client: APIClient):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
    # 1. –ü–æ–∫–∞–∑–∞—Ç—å typing
    await message.bot.send_chat_action(
        chat_id=message.chat.id,
        action="record_voice"
    )

    # 2. –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
    file = await message.bot.get_file(message.voice.file_id)
    audio_bytes = await message.bot.download_file(file.file_path)

    # 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ backend
    response = await api_client.process_voice(
        user_id=message.from_user.id,
        audio=audio_bytes
    )

    # 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç –•–æ–Ω–∑–∏–∫–∞
    await message.answer_voice(
        voice=response.audio_response,
        caption=f"‚úÖ {response.correctness_score}% | üî• {response.streak}"
    )

    # 5. –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
    if response.corrections.mistakes:
        await message.answer(
            format_corrections(response.corrections, user.ui_language)
        )
```

## –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```python
# bot/localization/ru.py
TEXTS_RU = {
    "welcome": "–ü—Ä–∏–≤–µ—Ç! –Ø –•–æ–Ω–∑–∏–∫ üá®üáø\n\n–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –≤—ã—É—á–∏—Ç—å —á–µ—à—Å–∫–∏–π —è–∑—ã–∫!",
    "choose_level": "–í—ã–±–µ—Ä–∏ —Å–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —á–µ—à—Å–∫–æ–≥–æ:",
    "level_beginner": "Zaƒç√°teƒçn√≠k (–ù–∞—á–∏–Ω–∞—é—â–∏–π)",
    "level_intermediate": "St≈ôednƒõ pokroƒçil√Ω (–°—Ä–µ–¥–Ω–∏–π)",
    "level_advanced": "Pokroƒçil√Ω (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π)",
    "level_native": "Rodil√Ω (–ù–æ—Å–∏—Ç–µ–ª—å)",
    "help_tips": "üé§ –û—Ç–ø—Ä–∞–≤–ª—è–π –º–Ω–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ –Ω–∞ —á–µ—à—Å–∫–æ–º!\n"
                 "üó£Ô∏è –ì–æ–≤–æ—Ä–∏ –ø–æ–¥—Ä–æ–±–Ω–æ –∏ –Ω–µ –±–æ–π—Å—è –æ—à–∏–±–æ–∫\n"
                 "üç∫ –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º –ø–∏–≤–æ –∏ –∫–Ω–µ–¥–ª–∏–∫–∏!",
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã
}

# bot/localization/uk.py
TEXTS_UK = {
    "welcome": "–ü—Ä–∏–≤—ñ—Ç! –Ø –•–æ–Ω–∑—ñ–∫ üá®üáø\n\n–Ø –¥–æ–ø–æ–º–æ–∂—É —Ç–æ–±—ñ –≤–∏–≤—á–∏—Ç–∏ —á–µ—Å—å–∫—É –º–æ–≤—É!",
    "choose_level": "–û–±–µ—Ä–∏ —Å–≤—ñ–π —Ä—ñ–≤–µ–Ω—å —á–µ—Å—å–∫–æ—ó:",
    # ... —É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
}
```

# === –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ù–ê RAILWAY.COM ===

## Railway.json –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```json
{
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile"
  },
  "deploy": {
    "startCommand": "python -m uvicorn backend.main:app --host 0.0.0.0 --port $PORT & python bot/main.py",
    "healthcheckPath": "/health",
    "healthcheckTimeout": 100,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

## Dockerfile –¥–ª—è Railway

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY . .

# –ü–æ—Ä—Ç –¥–ª—è Railway
EXPOSE ${PORT}

# –ó–∞–ø—É—Å–∫ backend –∏ bot
CMD uvicorn backend.main:app --host 0.0.0.0 --port ${PORT} & python bot/main.py
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Railway

### Backend
```
DATABASE_URL=${DATABASE_URL}  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Railway PostgreSQL
OPENAI_API_KEY=sk-...
TELEGRAM_BOT_TOKEN=7471812936:AAFoji4k74oAo347ahNaa1K1WAPtiSQ_ox8
PORT=${PORT}  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Railway
LOG_LEVEL=INFO
ENVIRONMENT=production
```

### Railway PostgreSQL Plugin
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç DATABASE_URL
- PostgreSQL 15
- Backups –≤–∫–ª—é—á–µ–Ω—ã

## Health Check endpoint

```python
# backend/main.py
from fastapi import FastAPI

app = FastAPI()

@app.get("/health")
async def health_check():
    """Health check –¥–ª—è Railway.com"""
    return {
        "status": "healthy",
        "service": "mluv-me",
        "version": "1.0.0"
    }
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Railway

```python
import structlog

# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç stdout/stderr
logger = structlog.get_logger()

logger.info(
    "voice_processed",
    user_id=user_id,
    duration=duration,
    score=score
)
```

# === –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï ===

## Backend (pytest)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
```
tests/
‚îú‚îÄ‚îÄ conftest.py          # Fixtures
‚îú‚îÄ‚îÄ test_services/
‚îÇ   ‚îú‚îÄ‚îÄ test_openai_client.py
‚îÇ   ‚îú‚îÄ‚îÄ test_honzik_personality.py
‚îÇ   ‚îú‚îÄ‚îÄ test_correction_engine.py
‚îÇ   ‚îî‚îÄ‚îÄ test_gamification.py
‚îú‚îÄ‚îÄ test_routers/
‚îÇ   ‚îú‚îÄ‚îÄ test_lessons.py
‚îÇ   ‚îî‚îÄ‚îÄ test_stats.py
‚îî‚îÄ‚îÄ test_repositories/
    ‚îú‚îÄ‚îÄ test_user_repository.py
    ‚îî‚îÄ‚îÄ test_message_repository.py
```

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤
```python
# test_services/test_honzik_personality.py
import pytest
from services.honzik_personality import HonzikPersonality

@pytest.fixture
def honzik():
    return HonzikPersonality()

def test_honzik_friendly_response(honzik):
    """–¢–µ—Å—Ç –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –•–æ–Ω–∑–∏–∫–∞."""
    response = await honzik.generate_response(
        user_text="Ahoj, jak se m√°≈°?",
        style="friendly",
        level="beginner",
        corrections_level="balanced",
        ui_language="ru"
    )

    assert response.honzik_response is not None
    assert "Ahoj" in response.honzik_response
    assert response.correctness_score >= 0
    assert response.correctness_score <= 100
```

# === –õ–£–ß–®–ò–ï –ü–†–ê–ö–¢–ò–ö–ò ===

## –†–∞–±–æ—Ç–∞ —Å OpenAI API

### Rate Limiting
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å exponential backoff –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ Railway

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã
- –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –•–æ–Ω–∑–∏–∫–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSON mode –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è —Ç–æ–ª—å–∫–æ 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```python
from openai import OpenAI, RateLimitError, APIError
import asyncio

async def call_openai_with_retry(func, max_retries=3):
    """–í—ã–∑–æ–≤ OpenAI API —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏."""
    for attempt in range(max_retries):
        try:
            return await func()
        except RateLimitError:
            if attempt == max_retries - 1:
                raise
            await asyncio.sleep(2 ** attempt)  # exponential backoff
        except APIError as e:
            logger.error(f"OpenAI API error: {e}")
            raise
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### Backend –Ω–∞ Railway
- Connection pooling –¥–ª—è PostgreSQL
- Async –≤–µ–∑–¥–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Railway Redis –¥–ª—è –∫–µ—à–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### API Security
- Rate limiting –Ω–∞ –≤—Å–µ endpoints
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram user_id

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Railway
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å .env —Ñ–∞–π–ª—ã
- –†–æ—Ç–∞—Ü–∏—è API –∫–ª—é—á–µ–π —Ä–µ–≥—É–ª—è—Ä–Ω–æ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ Railway

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
import structlog

logger = structlog.get_logger()

logger.info(
    "honzik_conversation",
    user_id=user_id,
    duration_seconds=duration,
    correctness_score=score,
    words_count=words_count,
    streak=streak
)
```

### –ú–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö (Railway Observability)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI
- –°—Ç–æ–∏–º–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (DAU)
- Railway –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU/Memory/Network

# === –ü–†–ò–ú–ï–†–´ –ö–û–î–ê ===

## Backend: –õ–∏—á–Ω–æ—Å—Ç—å –•–æ–Ω–∑–∏–∫–∞

```python
# services/honzik_personality.py
from openai import AsyncOpenAI
from typing import Optional

class HonzikPersonality:
    """–õ–∏—á–Ω–æ—Å—Ç—å –•–æ–Ω–∑–∏–∫–∞ - –≤–µ—Å–µ–ª–æ–≥–æ —á–µ—à—Å–∫–æ–≥–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞."""

    def __init__(self, openai_client: AsyncOpenAI):
        self.client = openai_client
        self.base_prompt = HONZIK_BASE_PROMPT

    async def generate_response(
        self,
        user_text: str,
        style: str,
        level: str,
        corrections_level: str,
        ui_language: str,
        conversation_history: list[dict],
    ) -> dict:
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –•–æ–Ω–∑–∏–∫–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏.

        Args:
            user_text: –¢–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —á–µ—à—Å–∫–æ–º
            style: –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è (friendly/tutor/casual)
            level: –£—Ä–æ–≤–µ–Ω—å —á–µ—à—Å–∫–æ–≥–æ
            corrections_level: –£—Ä–æ–≤–µ–Ω—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
            ui_language: –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (ru/uk)
            conversation_history: –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞

        Returns:
            dict: –û—Ç–≤–µ—Ç —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –∏ –æ—Ü–µ–Ω–∫–æ–π
        """
        prompt = self._build_prompt(
            user_text=user_text,
            style=style,
            level=level,
            corrections_level=corrections_level,
            ui_language=ui_language,
            conversation_history=conversation_history
        )

        response = await self.client.chat.completions.create(
            model="gpt-4o",
            messages=[
                {"role": "system", "content": prompt},
                {"role": "user", "content": user_text}
            ],
            response_format={"type": "json_object"},
            temperature=0.8  # –ß—É—Ç—å –≤—ã—à–µ –¥–ª—è –±–æ–ª–µ–µ –∂–∏–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        )

        return json.loads(response.choices[0].message.content)
```

## Bot: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π

```python
# bot/handlers/voice.py
from aiogram import Router, F
from aiogram.types import Message
from services.api_client import APIClient
from localization import get_text

router = Router()

@router.message(F.voice)
async def handle_voice(message: Message, api_client: APIClient):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è."""
    user = await api_client.get_user(message.from_user.id)

    # –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –•–æ–Ω–∑–∏–∫ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç
    await message.bot.send_chat_action(
        chat_id=message.chat.id,
        action="record_voice"
    )

    # –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
    file = await message.bot.get_file(message.voice.file_id)
    audio_bytes = await message.bot.download_file(file.file_path)

    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ backend
    response = await api_client.process_voice(
        user_id=message.from_user.id,
        audio=audio_bytes
    )

    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç –•–æ–Ω–∑–∏–∫–∞
    caption = f"‚úÖ {response.correctness_score}% | üî• Streak: {response.streak}"
    await message.answer_voice(
        voice=response.audio_response,
        caption=caption
    )

    # –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    if response.corrections.mistakes:
        corrections_text = format_corrections(
            response.corrections,
            user.ui_language
        )
        await message.answer(corrections_text)

    # –ï—Å–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –∑–≤–µ–∑–¥—ã
    if response.stars_earned > 0:
        stars_text = get_text("stars_earned", user.ui_language)
        await message.answer(
            f"‚≠ê {stars_text}: +{response.stars_earned}"
        )
```

# === ROADMAP ===

## MVP (4-6 –Ω–µ–¥–µ–ª—å)

### –ù–µ–¥–µ–ª—è 1-2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [x] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] Railway.com –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [ ] PostgreSQL –Ω–∞ Railway
- [ ] Backend: FastAPI + SQLAlchemy
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: —Å—Ö–µ–º–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] Dockerfile –¥–ª—è Railway

### –ù–µ–¥–µ–ª—è 3-4: –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (STT, LLM, TTS)
- [ ] HonzikPersonality —Å–µ—Ä–≤–∏—Å
- [ ] Backend endpoints
- [ ] Bot: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö
- [ ] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (ru, uk)
- [ ] –ë–∞–∑–æ–≤–∞—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ù–µ–¥–µ–ª—è 5-6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –•–æ–Ω–∑–∏–∫–∞
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ Railway.com
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞
- [ ] –ó–∞–ø—É—Å–∫!

## V1.5 - –£–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

- [ ] –¢–µ–º—ã —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ (–º–µ–Ω—é —Ç–µ–º)
- [ ] –ú–∏–Ω–∏-–∫–≤–µ—Å—Ç—ã –æ—Ç –•–æ–Ω–∑–∏–∫–∞
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å–ª–æ–≤–∞—Ä—è –≤ Anki

## V2 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏—á–∏

- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ (–¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–∑–µ–π –•–æ–Ω–∑–∏–∫–∞)
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã
- [ ] –†–æ–ª–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [ ] –ü–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Telegram Stars
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è

# === –†–£–ö–û–í–û–î–°–¢–í–û –î–õ–Ø AI ===

ai_guidance:
  - –°–ª–µ–¥–æ–≤–∞—Ç—å –≤—Å–µ–º –ø—Ä–∞–≤–∏–ª–∞–º —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
  - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–¥–∞ –¥–ª—è –•–æ–Ω–∑–∏–∫–∞ –¥–µ–ª–∞—Ç—å –µ–≥–æ –∂–∏–≤—ã–º –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º
  - –ü–æ–º–Ω–∏—Ç—å —á—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π –∏ —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
  - –û–±—É—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—à—Å–∫–æ–º—É —è–∑—ã–∫—É
  - –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å async/await –¥–ª—è I/O
  - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å type hints –∏ docstrings
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è Railway.com —Ö–æ—Å—Ç–∏–Ω–≥–∞
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ gracefully
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  - –°–ª–µ–¥–æ–≤–∞—Ç—å Clean Architecture
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å OpenAI API
  - –î–µ–ª–∞—Ç—å –∫–æ–¥ —á–∏—Ç–∞–µ–º—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º
  - –í—Å—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –ø–∞–ø–∫—É docs/¬®
  - –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã git

# === –ß–ï–®–°–ö–ò–ï –§–†–ê–ó–´ –î–õ–Ø –•–û–ù–ó–ò–ö–ê ===

–¢–∏–ø–∏—á–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –•–æ–Ω–∑–∏–∫–∞ (–¥–ª—è –±–æ–ª–µ–µ –∂–∏–≤–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞):

## –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
- "Nazdar!" / "Ahoj!" / "ƒåau!"
- "Jak se vede?" / "Jak se m√°≈°?"
- "Co je nov√©ho?"

## –û–¥–æ–±—Ä–µ–Ω–∏–µ
- "V√Ωbornƒõ!" (–û—Ç–ª–∏—á–Ω–æ!)
- "Super!" / "Prima!"
- "To je skvƒõl√Ω!" (–≠—Ç–æ –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ!)
- "M√°≈° to!" (–£ —Ç–µ–±—è –ø–æ–ª—É—á–∞–µ—Ç—Å—è!)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- "Nevad√≠, zkus√≠me to znovu" (–ù–µ —Å—Ç—Ä–∞—à–Ω–æ, –ø–æ–ø—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑)
- "Uƒçen√≠ je proces" (–û–±—É—á–µ–Ω–∏–µ - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å)
- "Postupnƒõ to p≈Øjde l√≠p" (–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –±—É–¥–µ—Ç –ª—É—á—à–µ)

## –û –ø–∏–≤–µ –∏ –∫–Ω–µ–¥–ª–∏–∫–∞—Ö
- "D√°me si pivo?" (–í—ã–ø—å–µ–º –ø–∏–≤–∞?)
- "Knedl√≠ky jsou nejlep≈°√≠ j√≠dlo!" (–ö–Ω–µ–¥–ª–∏–∫–∏ - –ª—É—á—à–∞—è –µ–¥–∞!)
- "Pilsner Urquell je bo≈æsk√Ω" (–ü–∏–ª—Å–Ω–µ—Ä –£—Ä–∫–≤–µ–ª–ª –±–æ–∂–µ—Å—Ç–≤–µ–Ω–µ–Ω)

## –û –ü—Ä–∞–≥–µ
- "Praha je nejkr√°snƒõj≈°√≠ mƒõsto" (–ü—Ä–∞–≥–∞ - –∫—Ä–∞—Å–∏–≤–µ–π—à–∏–π –≥–æ—Ä–æ–¥)
- "Zn√°≈° Karl≈Øv most?" (–ó–Ω–∞–µ—à—å –ö–∞—Ä–ª–æ–≤ –º–æ—Å—Ç?)
- "Tramvaje v Praze jsou √∫≈æasn√Ω" (–¢—Ä–∞–º–≤–∞–∏ –≤ –ü—Ä–∞–≥–µ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–µ)

# === –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï ===

–≠—Ç–æ—Ç —Ñ–∞–π–ª `.cursorrules` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É Mluv.Me - –±–æ—Ç–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —á–µ—à—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –•–æ–Ω–∑–∏–∫–æ–º.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- üá®üáø –•–æ–Ω–∑–∏–∫ - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂, –≤–µ—Å–µ–ª—ã–π —Ç–∏–ø–∏—á–Ω—ã–π —á–µ—Ö
- üó£Ô∏è –¢–æ–ª—å–∫–æ —á–µ—à—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- üåç –¢–æ–ª—å–∫–æ —Ä—É—Å—Å–∫–∏–π –∏ —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üöÇ –•–æ—Å—Ç–∏–Ω–≥ –Ω–∞ Railway.com
- ü§ñ Telegram Bot API: 7471812936:AAFoji4k74oAo347ahNaa1K1WAPtiSQ_ox8

–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! Na zdrav√≠! üç∫
